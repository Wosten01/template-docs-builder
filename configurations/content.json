{
  "ru": {
    "title": "Настройка VPS сервера",
    "description": "Быстрая настройка и конфигурация вашего VPS сервера",
    "content": [
      {
        "title": "Основные",
        "blocks": [
          {
            "title": "Подключение к серверу",
            "description": "Подключение к VPS по SSH. После ввода команды потребуется ввести пароль пользователя (пароль не отображается).",
            "code": "ssh root@{server_ip}"
          },
          {
            "title": "Обновление системы",
            "description": "Обновляет список пакетов и устанавливает последние доступные обновления.",
            "code": "sudo apt update && sudo apt upgrade -y"
          },
          {
            "title": "Создание нового пользователя и добавление в sudo",
            "description": "Создаёт нового пользователя и даёт ему права администратора (через группу sudo). При создании потребуется придумать пароль и при желании заполнить дополнительные данные (они необязательны и могут быть пропущены нажатием Enter).",
            "code": "adduser {username} && usermod -aG sudo {username}"
          },
          {
            "title": "Переключение на нового пользователя",
            "description": "После создания нового пользователя рекомендуется работать под его именем. Для этого используйте команду ниже и введите пароль нового пользователя.",
            "code": "su - {username}"
          }
        ]
      },
      {
        "title": "SSH ключи",
        "blocks": [
          {
            "title": "Создание SSH-ключа ed25519 с заданным именем и путём",
            "description": "Генерирует SSH-ключ типа ed25519 с возможностью указать комментарий (-C) и путь к файлу (-f). Ключ будет сохранён в указанную папку.",
            "steps": [
              "Откройте терминал.",
              {
                "text": "Вставьте команду, указав свой комментарий (например, имя или email) и путь к нужной папке/файлу.",
                "code": "ssh-keygen -t ed25519 -C \"{ssh_comment}\" -f {ssh_path_to_key}"
              },
              "Нажмите Enter. Если папка не существует, создайте её предварительно: mkdir -p ~/.ssh/vps",
              "При желании введите passphrase для ключа или оставьте пустым."
            ]
          },
          {
            "title": "Копировать SSH-ключ на сервер",
            "description": "Передаёт публичный ключ на сервер для входа без пароля.",
            "steps": [
              "Убедитесь, что сервер доступен по SSH.",
              {
                "text": "Выполните команду:",
                "code": "ssh-copy-id -i {ssh_path_to_key}.pub {username}@{server_ip}"
              },
              "Введите пароль пользователя сервера по запросу.",
              "Теперь для входа будет использоваться ваш SSH-ключ без необходимости каждый раз вводить пароль."
            ]
          },
          {
            "title": "Настройка подключения в ~/.ssh/config",
            "description": "Позволяет создать простую команду alias для подключения к серверу без ввода IP, логина и пути к ключу каждый раз.",
            "steps": [
              {
                "text": "Откройте или создайте файл конфигурации:",
                "code": { "text": "nano ~/.ssh/config", "showArrow": "true" }
              },
              {
                "text": "Добавьте в файл блок (замените значения на свои):",
                "code": {
                  "text": "Host {host_name}\n\tHostName {server_ip}\n\tUser {username}\n\tPort {ssh_port}\n\tIdentityFile {ssh_path_to_key}.pub\n\tIdentitiesOnly yes",
                  "showArrow": "false"
                }
              },

              "Сохраните файл (Ctrl+O), затем выйдите из редактора (Ctrl+X).",
              {
                "text": "Проверьте права доступа:",
                "code": "chmod 600 ~/.ssh/config"
              },
              {
                "text": "После настройки на серверы вы сможете подключатся к серверу через alias:",
                "code": "ssh {host_name}"
              }
            ]
          }
        ]
      },
      {
        "title": "Настройка сервера",
        "blocks": [
          {
            "title": "Смена порта SSH, отключение входа по паролю и для root",
            "description": "Улучшает безопасность сервера: настраивает нестандартный порт SSH, запрещает вход по паролю и отключает прямой доступ для пользователя root.",

            "steps": [
              {
                "text": "Откройте файл конфигурации SSH:",
                "code": "sudo nano /etc/ssh/sshd_config"
              },
              {
                "text": "Найдите или добавьте следующие строки и задайте нужные значения:",
                "code": {
                  "text": "Port {ssh_port}\nPermitRootLogin no\nPasswordAuthentication no",
                  "separateLines": "true"
                }
              },
              "Проверьте, чтобы строки не были закомментированы (без символа # в начале).",
              "Сохраните изменения (Ctrl+O), нажмите Enter и выйдите из редактора (Ctrl+X).",
              {
                "text": "Разрешите новый порт в брандмауэре (если используется UFW):",
                "code": "sudo ufw allow {ssh_port}/tcp && sudo ufw reload"
              },
              {
                "text": "Перезапустите SSH-сервис, чтобы применить обновлённые настройки:",
                "code": "sudo systemctl restart ssh"
              },
              {
                "text": "Теперь можно подключаться по имени alias (возможно снова придется ввести код пользователя {username}):",
                "code": "ssh {host_name}"
              }
            ],
            "note": "Не закрывайте активную SSH-сессию, пока не убедитесь, что можно подключиться по новому порту. Убедитесь, что SSH-ключи настроены и пользователь имеет доступ с sudo. Выбранный порт должен быть в диапазоне 1024–65535 и не использоваться другими службами."
          }
        ]
      },
      {
        "title": "Настройка VPN",
        "blocks": [
          {
            "title": "Создание самоподписанного сертификата",
            "description": "Генерация SSL-сертификата с помощью openssl для защиты соединения:",
            "code": "sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 \\\n  -keyout /etc/x-ui/selfsigned.key \\\n  -out /etc/x-ui/selfsigned.crt \\\n  -subj \"/CN={server_ip}\""
          },
          {
            "title": "Установка 3X-UI",
            "description": "Установка панели 3X-UI с помощью скрипта установки.",
            "steps": [
              {
                "text": "После успешной установки проверьте, на каком порту запущена панель 3X-UI.",
                "code": "curl -Ls https://raw.githubusercontent.com/mhsanaei/3x-ui/master/install.sh | sudo bash"
              },
              {
                "text": "Для этого можете просмотреть статус сервиса или процессы, командой ниже или проверьте файлы конфигурации или логи панели.",
                "code": "sudo systemctl status x-ui"
              },
              "В консоли будет выведены данные для входа, перейдите по url указанной в консоли"
            ],
            "note": "Убедитесь, что порт доступен и не блокируется провайдером или локальными настройками firewall перед работой с панелью."
          },
          {
            "title": "Добавление сертификата в панель x-ui",
            "description": "Укажите созданные файлы сертификата и ключа в разделе `Certificates` во вкладке `Panel Settings`.",
            "steps": [
              "  /etc/x-ui/selfsigned.crt – сертификат",
              "  /etc/x-ui/selfsigned.key – приватный ключ"
            ]
          },
          {
            "title": "Настройка подключения",
            "steps": [
              "Зайдите во вкладку `Inbounds`",
              "Нажмите кнопку `Add Inbounds`",
              "`Remark` можете выбрать имя (название подключения)",
              "`Protocol` выберете `vless`",
              "`Port` введите 443",
              "`Security` введите нажмите `Reality`",
              "`uTLS` можно выбрать любой",
              "Выбор `Dest` описан ниже (можно оставить как есть, однако это важный параметр влияющий на скорость, поэтому лучше отнестись к нему серьезно)",
              "Нажать на кнопку `Get New Cert`"
            ]
          },
          {
            "title": "Настройка пользователя",
            "note": "Можно добавить сразу несколько пользователей по кнопке `Add Bulk`",
            "steps": [
              "Нажмите кнопку `Add Client` по кнопке в колонке `Menu`",
              "Вместо Email можно ввести имя (или что-либо другое)",
              "Во `Flow` установить значение xtls-rprx-vision"
            ]
          },
          {
            "title": "Выбор сайта dest для Reality",
            "description": "Рекомендуемые сайты для параметра dest и проверка скорости доступа.\nМожете выбрать и проверить один из предложенных сайтов или выбрать собственный:",
            "steps": [
              {
                "text": "www.samsung.com:",
                "code": "ping -c 4 www.samsung.com"
              },
              {
                "text": "www.googletagmanager.com:",
                "code": "ping -c 4 www.googletagmanager.com"
              },
              {
                "text": "www.asus.com:",
                "code": "ping -c 4 www.asus.com"
              },
              {
                "text": "www.amd.com:",
                "code": "ping -c 4 www.amd.com"
              },
              {
                "text": "www.cisco.com:",
                "code": "ping -c 4 www.cisco.com"
              },
              {
                "text": "www.microsoft.com:",
                "code": "ping -c 4 www.microsoft.com"
              },
              {
                "text": "dl.google.com:",
                "code": "ping -c 4 dl.google.com"
              },
              {
                "text": "www.linksys.com:",
                "code": "ping -c 4 www.linksys.com"
              },
              {
                "text": "www.nvidia.com:",
                "code": "ping -c 4 www.nvidia.com"
              }
            ]
          },
          {
            "title": "Разрешение обращения к портам",
            "description": "Если вы выполнили предыдущие шаги, то вы открыли 443 порт для `Inbound` и {3x-ui-port} для панели 3X-UI.",
            "code": "sudo ufw allow 443/tcp && sudo ufw allow {3x-ui-port}/tcp && sudo ufw reload"
          }
        ]
      }
    ]
  },

  "en": {
    "title": "VPS Server Setup",
    "description": "Quick setup and configuration of your VPS server",
    "content": [
      {
        "title": "Basics",
        "blocks": [
          {
            "title": "Connecting to the server",
            "description": "Connect to the VPS via SSH. After entering the command, you will need to enter the user password (the password is not displayed).",
            "code": "ssh root@{server_ip}"
          },
          {
            "title": "System update",
            "description": "Updates the package list and installs the latest available upgrades.",
            "code": "sudo apt update && sudo apt upgrade -y"
          },
          {
            "title": "Creating a new user and adding to sudo",
            "description": "Creates a new user and grants them administrator rights (via the sudo group). You will need to come up with a password and optionally fill additional data (optional and can be skipped by pressing Enter).",
            "code": "adduser {username} && usermod -aG sudo {username}"
          },
          {
            "title": "Switching to the new user",
            "description": "After creating the new user, it is recommended to work under their account. Use the command below and enter the new user's password.",
            "code": "su - {username}"
          }
        ]
      },
      {
        "title": "SSH Keys",
        "blocks": [
          {
            "title": "Creating an ed25519 SSH key with a specified name and path",
            "description": "Generates an ed25519 SSH key with the ability to specify a comment (-C) and a file path (-f). The key will be saved in the specified folder.",
            "steps": [
              "Open a terminal.",
              {
                "text": "Enter the command specifying your comment (e.g., name or email) and the path to the desired folder/file.",
                "code": "ssh-keygen -t ed25519 -C \"{ssh_comment}\" -f {ssh_path_to_key}"
              },
              "Press Enter. If the folder does not exist, create it in advance: mkdir -p ~/.ssh/vps",
              "Optionally enter a passphrase for the key or leave it empty."
            ]
          },
          {
            "title": "Copying the SSH key to the server",
            "description": "Copies the public key to the server for passwordless login.",
            "steps": [
              "Ensure the server is accessible via SSH.",
              {
                "text": "Run the command:",
                "code": "ssh-copy-id -i {ssh_path_to_key}.pub {username}@{server_ip}"
              },
              "Enter the server user's password when requested.",
              "Now you will be able to log in using your SSH key without entering a password each time."
            ]
          },
          {
            "title": "Configuring connection in ~/.ssh/config",
            "description": "Allows creating a simple alias command for connecting to the server without entering IP, login, and key path every time.",
            "steps": [
              {
                "text": "Open or create the configuration file:",
                "code": { "text": "nano ~/.ssh/config", "showArrow": "true" }
              },
              {
                "text": "Add the following block to the file (replace values with your own):",
                "code": {
                  "text": "Host {host_name}\n\tHostName {server_ip}\n\tUser {username}\n\tPort {ssh_port}\n\tIdentityFile {ssh_path_to_key}.pub\n\tIdentitiesOnly yes",
                  "showArrow": "false"
                }
              },
              "Save the file (Ctrl+O), then exit the editor (Ctrl+X).",
              {
                "text": "Check permissions:",
                "code": "chmod 600 ~/.ssh/config"
              },
              {
                "text": "After configuration, you can connect to the server via alias:",
                "code": "ssh {host_name}"
              }
            ]
          }
        ]
      },
      {
        "title": "Server Configuration",
        "blocks": [
          {
            "title": "Changing SSH port, disabling password and root login",
            "description": "Enhances server security: configures a non-standard SSH port, disables password login and direct access for the root user.",
            "steps": [
              {
                "text": "Open the SSH configuration file:",
                "code": "sudo nano /etc/ssh/sshd_config"
              },
              {
                "text": "Find or add the following lines and set the desired values:",
                "code": {
                  "text": "Port {ssh_port}\nPermitRootLogin no\nPasswordAuthentication no",
                  "separateLines": "true"
                }
              },
              "Make sure the lines are not commented out (no # at the line start).",
              "Save changes (Ctrl+O), press Enter and exit the editor (Ctrl+X).",
              {
                "text": "Allow the new port in the firewall (if using UFW):",
                "code": "sudo ufw allow {ssh_port}/tcp && sudo ufw reload"
              },
              {
                "text": "Restart the SSH service to apply the updated settings:",
                "code": "sudo systemctl restart ssh"
              },
              {
                "text": "You can now connect using the alias name (you may need to enter the {username} code again):",
                "code": "ssh {host_name}"
              }
            ],
            "note": "Do not close the active SSH session until you verify that you can connect via the new port. Ensure SSH keys are set up and the user has sudo access. The chosen port should be between 1024–65535 and not used by other services."
          }
        ]
      },
      {
        "title": "VPN Setup",
        "blocks": [
          {
            "title": "Creating a self-signed certificate",
            "description": "Generating an SSL certificate using openssl to secure the connection:",
            "code": "sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 \\\n  -keyout /etc/x-ui/selfsigned.key \\\n  -out /etc/x-ui/selfsigned.crt \\\n  -subj \"/CN={server_ip}\""
          },
          {
            "title": "Installing 3X-UI",
            "description": "Installing the 3X-UI panel using the installation script.",
            "steps": [
              {
                "text": "After successful installation, check which port the 3X-UI panel is running on.",
                "code": "curl -Ls https://raw.githubusercontent.com/mhsanaei/3x-ui/master/install.sh | sudo bash"
              },
              {
                "text": "You can check the service status or processes using the command below, or check configuration files or panel logs.",
                "code": "sudo systemctl status x-ui"
              },
              "The console will display login information; open the URL provided in the console."
            ],
            "note": "Make sure the port is open and not blocked by your provider or local firewall settings before working with the panel."
          },
          {
            "title": "Adding certificate to the x-ui panel",
            "description": "Specify the created certificate and key files in the 'Certificates' section under the 'Panel Settings' tab.",
            "steps": [
              "  /etc/x-ui/selfsigned.crt – certificate",
              "  /etc/x-ui/selfsigned.key – private key"
            ]
          },
          {
            "title": "Connection setup",
            "steps": [
              "Go to the 'Inbounds' tab",
              "Click 'Add Inbounds'",
              "In 'Remark' enter a name (connection name)",
              "Select 'vless' for 'Protocol'",
              "Enter 443 for 'Port'",
              "In 'Security' select 'Reality'",
              "You can select any option for 'uTLS'",
              "The 'Dest' choice is described below (you may leave as is, but this parameter affects speed and should be taken seriously)",
              "Click 'Get New Cert'"
            ]
          },
          {
            "title": "User setup",
            "note": "You can add multiple users at once using the 'Add Bulk' button",
            "steps": [
              "Click the 'Add Client' button in the 'Menu' column",
              "Instead of Email, enter a name (or anything else)",
              "Set 'Flow' to xtls-rprx-vision"
            ]
          },
          {
            "title": "Selecting a 'dest' site for Reality",
            "description": "Recommended sites for the 'dest' parameter and checking access speed.\nYou can choose and test one of the suggested sites or select your own:",
            "steps": [
              {
                "text": "www.samsung.com:",
                "code": "ping -c 4 www.samsung.com"
              },
              {
                "text": "www.googletagmanager.com:",
                "code": "ping -c 4 www.googletagmanager.com"
              },
              {
                "text": "www.asus.com:",
                "code": "ping -c 4 www.asus.com"
              },
              {
                "text": "www.amd.com:",
                "code": "ping -c 4 www.amd.com"
              },
              {
                "text": "www.cisco.com:",
                "code": "ping -c 4 www.cisco.com"
              },
              {
                "text": "www.microsoft.com:",
                "code": "ping -c 4 www.microsoft.com"
              },
              {
                "text": "dl.google.com:",
                "code": "ping -c 4 dl.google.com"
              },
              {
                "text": "www.linksys.com:",
                "code": "ping -c 4 www.linksys.com"
              },
              {
                "text": "www.nvidia.com:",
                "code": "ping -c 4 www.nvidia.com"
              }
            ]
          },
          {
            "title": "Opening ports",
            "description": "If you have completed the previous steps, you have opened port 443 for 'Inbound' and {3x-ui-port} for the 3X-UI panel.",
            "code": "sudo ufw allow 443/tcp && sudo ufw allow {3x-ui-port}/tcp && sudo ufw reload"
          }
        ]
      }
    ]
  }
}
